var draw=function(){var e=document.querySelector("main").offsetWidth,t=document.querySelector("main").offsetHeight,n=document.createElement("canvas"),i=n.getContext("2d"),r=n.getBoundingClientRect(),o=0,a=0,l=0,d=0,c=0,s=0,u=0,g=0,f="",h=!1,w="",m="";return{randColor:function(){return"#"+Math.floor(16777215*Math.random()).toString(16)},setStrokeColor:function(e){w=e},setFillColor:function(e){m=e},getStrokeColor:function(){return 6<w.length?w:this.randColor()},getFillColor:function(){return 6<m.length?m:this.randColor()},setXY:function(e){u=o,g=a,o=e.clientX-r.left-n.offsetLeft,a=e.clientY-r.top-n.offsetTop},writeXY:function(){document.getElementById("trackX").innerHTML="X: "+o,document.getElementById("trackY").innerHTML="Y: "+a},setIsDrawing:function(e){h=e},getIsDrawing:function(){return h},setShape:function(e){f=e},setStart:function(){l=o,d=a},setEnd:function(){c=o,s=a},getCanvas:function(){return n},getShape:function(){return f},draw:function(){i.restore(),"rectangle"===f?this.drawRect():"line"===f?this.drawLine():"circle"===f?this.drawCircle():"path"===f?this.drawPath():"triangle"===f?this.drawTriangle():alert("Please choose a shape"),i.save()},drawLine:function(){i.strokeStyle=this.getStrokeColor(),i.beginPath(),i.moveTo(l,d),i.lineTo(c,s),i.stroke()},drawRect:function(){i.fillStyle=this.getFillColor(),i.strokeStyle=this.getStrokeColor(),i.fillRect(l,d,c-l,s-d),i.strokeRect(l,d,c-l,s-d)},drawCircle:function(){i.fillStyle=this.getFillColor(),i.strokeStyle=this.getStrokeColor(),i.beginPath();var e=l-c,t=d-s;radius=Math.sqrt(e*e+t*t),i.arc(l,d,radius,0,2*Math.PI),i.stroke(),i.fill()},drawPath:function(){i.strokeStyle=this.getStrokeColor(),i.beginPath(),i.moveTo(u,g),i.lineTo(o,a),i.stroke()},drawTriangle:function(){var e=l-c,t=d-s,n=Math.sqrt(e*e+t*t),r=l+n,o=d+n;c<l&&(r=l-n),s<d&&(o=d-n),i.fillStyle=this.getFillColor(),i.strokeStyle=this.getStrokeColor(),i.beginPath(),i.moveTo(l,d),i.lineTo(r,o),i.lineTo(c,s),i.lineTo(l,d),i.stroke(),i.fill()},init:function(){n.width=e,n.height=t,document.querySelector("main").appendChild(n)}}}();draw.init(),draw.getCanvas().addEventListener("mousemove",function(e){draw.setXY(e),draw.writeXY(),"path"===draw.getShape()&&!0===draw.getIsDrawing()&&draw.draw()}),draw.getCanvas().addEventListener("mousedown",function(){draw.setStart(),draw.setIsDrawing(!0)}),draw.getCanvas().addEventListener("mouseup",function(){draw.setEnd(),draw.draw(),draw.setIsDrawing(!1)}),document.getElementById("btnRect").addEventListener("click",function(){draw.setShape("rectangle")}),document.getElementById("btnLine").addEventListener("click",function(){draw.setShape("line")}),document.getElementById("btnCircle").addEventListener("click",function(){draw.setShape("circle")}),document.getElementById("btnPath").addEventListener("click",function(){draw.setShape("path")}),document.getElementById("btnTriangle").addEventListener("click",function(){draw.setShape("triangle")}),document.getElementById("strokeColor").addEventListener("change",function(){draw.setStrokeColor(document.getElementById("strokeColor").value)}),document.getElementById("randStrokeColor").addEventListener("change",function(){draw.setStrokeColor("")}),document.getElementById("fillColor").addEventListener("change",function(){draw.setFillColor(document.getElementById("fillColor").value)}),document.getElementById("randFillColor").addEventListener("change",function(){draw.setFillColor("")});